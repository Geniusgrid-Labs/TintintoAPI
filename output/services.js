const a9_0x5c7351=a9_0x1276;(function(_0x276135,_0x2f17da){const _0x3dcb56=a9_0x1276;const _0x15fa4b=_0x276135();while(!![]){try{const _0x3c485a=parseInt(_0x3dcb56(0x93))/0x1*(-parseInt(_0x3dcb56(0xa0))/0x2)+-parseInt(_0x3dcb56(0xcb))/0x3+-parseInt(_0x3dcb56(0xa1))/0x4*(-parseInt(_0x3dcb56(0xa9))/0x5)+parseInt(_0x3dcb56(0xc7))/0x6*(parseInt(_0x3dcb56(0x97))/0x7)+-parseInt(_0x3dcb56(0xdd))/0x8*(parseInt(_0x3dcb56(0xb3))/0x9)+parseInt(_0x3dcb56(0xbb))/0xa*(-parseInt(_0x3dcb56(0xde))/0xb)+-parseInt(_0x3dcb56(0xb9))/0xc*(-parseInt(_0x3dcb56(0xca))/0xd);if(_0x3c485a===_0x2f17da){break;}else{_0x15fa4b['push'](_0x15fa4b['shift']());}}catch(_0x197d81){_0x15fa4b['push'](_0x15fa4b['shift']());}}}(a9_0x94be,0xb680a));const tasksModel=require(a9_0x5c7351(0xdf));const devicesModel=require('./models/devices');const {numberCheck,balanceCheck}=require(a9_0x5c7351(0x9e));const msisdnModel=require('./models/msisdn');const commandListModel=require('./models/commandList');const gamesModel=require(a9_0x5c7351(0xbc));const pollingService=async(_0x433c9c,_0x4296df,_0x4b253a)=>{const _0xdbe550=a9_0x5c7351;const _0x502bd7=await tasksModel[_0xdbe550(0xda)]({'where':{'device_id':_0x433c9c?.[_0xdbe550(0xad)]?.['id']||''}});_0x4296df[_0xdbe550(0xb1)](_0x502bd7?.[_0xdbe550(0xc1)]||{});};const deletePollingService=async(_0x2766d4,_0x5df789,_0x23be4c)=>{const _0x306098=a9_0x5c7351;console['log'](_0x2766d4[_0x306098(0xad)]['id']);const _0x41aa36=await tasksModel[_0x306098(0xdc)]({'where':{'id':_0x2766d4?.['params']?.['id']||''}});_0x5df789[_0x306098(0xc8)](0xcc)['send'](_0x306098(0xe2));};const deviceLog=async(_0x233656,_0x95b990,_0x3a5c0b)=>{const _0x442a0d=a9_0x5c7351;console[_0x442a0d(0xc9)]('Recieved::',_0x233656[_0x442a0d(0xa8)],_0x233656['params'],_0x233656[_0x442a0d(0xd5)]);const _0x28b56c=await devicesModel[_0x442a0d(0xda)]({'where':{'device_id':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xdb)]}});if(_0x233656?.[_0x442a0d(0xd5)]?.['simslot']&&_0x28b56c?.[_0x442a0d(0xc1)]?.['id']){await devicesModel['update']({'active_slot':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xba)],'sim1':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xb6)],'sim2':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0x92)],'sim1_network':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xb5)],'sim2_network':_0x233656?.[_0x442a0d(0xd5)]?.['slot1']},{'where':{'device_id':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xdb)]}});}if(_0x233656[_0x442a0d(0xd5)]?.['action']===_0x442a0d(0xcc)){if(!_0x28b56c?.[_0x442a0d(0xc1)]?.['id']){await devicesModel[_0x442a0d(0x96)]({'name':_0x233656?.['body']?.[_0x442a0d(0xb4)],'pin':0x56d,'device_holder':_0x233656?.['body']?.[_0x442a0d(0xb4)],'device_id':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xdb)],'active_slot':_0x233656?.['body']?.[_0x442a0d(0xba)]});}}else if(_0x233656[_0x442a0d(0xd5)]?.['action']==='AccessibilityNodeInfo'){const _0x22b5d0=_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xbe)]||'';if(_0x22b5d0['includes']('your\x20phone\x20number\x20is')||_0x22b5d0[_0x442a0d(0xa5)](_0x442a0d(0xe3))||_0x22b5d0['includes']('your\x20number\x20is')){const _0x409b11=/(?:233|\+233|0)\d{9}/;const _0x522032=_0x22b5d0[_0x442a0d(0xc4)](_0x409b11);let _0x2f392d=_0x522032?.[0x0];let _0x5f3c16=_0x442a0d(0xd8);if(_0x22b5d0['includes'](_0x442a0d(0xd4))){_0x2f392d=_0x22b5d0['match'](/\b233\d{8,9}\b/)[0x0];_0x5f3c16=_0x442a0d(0xcd);}if(_0x22b5d0[_0x442a0d(0xa5)](_0x442a0d(0xe3)))_0x5f3c16=_0x442a0d(0xa3);if(_0x2f392d[_0x442a0d(0xae)]('0'))_0x2f392d=_0x442a0d(0x9c)+_0x2f392d[_0x442a0d(0xd7)](0x1);const _0x5bd78f=await msisdnModel['findOne']({'where':{'mobile':_0x2f392d}});if(!_0x5bd78f?.[_0x442a0d(0xc1)]?.['id']){await msisdnModel[_0x442a0d(0x96)]({'mobile':_0x2f392d,'holder':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xb4)],'network':_0x5f3c16,'pin':_0x442a0d(0xe1),'device_id':_0x233656?.[_0x442a0d(0xd5)]?.['device_id'],'balance':0x0,'slot':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xba)],'plays':0x0});}const _0x28f923=[];_0x28f923[_0x442a0d(0xb0)]({'device_id':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xdb)],'task':'writeData='+_0x233656?.['body']?.['device_id']+_0x442a0d(0xaf)+_0x233656?.['body']?.[_0x442a0d(0xba)]+_0x442a0d(0xa4)+_0x2f392d});_0x28f923[_0x442a0d(0xb0)]({'device_id':_0x233656?.[_0x442a0d(0xd5)]?.['device_id'],'task':'setsim='+_0x233656?.['body']?.[_0x442a0d(0xba)]});_0x28f923[_0x442a0d(0xb0)]({'device_id':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xdb)],'task':balanceCheck(_0x442a0d(0x94)+_0x233656?.[_0x442a0d(0xd5)]?.['slot'+_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xba)]])});_0x28f923[_0x442a0d(0xb0)]({'device_id':_0x233656?.['body']?.[_0x442a0d(0xdb)],'task':_0x442a0d(0xaa)});await tasksModel[_0x442a0d(0xac)](_0x28f923);}else if(_0x22b5d0[_0x442a0d(0xd6)]()[_0x442a0d(0xa5)](_0x442a0d(0xa6))){const _0xaa268f=_0x233656?.['body']?.[_0x442a0d(0xbe)][_0x442a0d(0xc4)](/GHS\s+([\d,]+\.?\d*)/g)['map'](_0x1e0ba5=>parseFloat(_0x1e0ba5['split']('\x20')[0x1][_0x442a0d(0xe0)](/,/g,'')))[0x0];await msisdnModel['update']({'balance':_0xaa268f,'slot':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xba)]},{'where':{'mobile':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xb8)+_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xba)]]}});}}else if(_0x233656['body']?.[_0x442a0d(0xc5)]===_0x442a0d(0xbf)){const _0x593241=_0x233656?.[_0x442a0d(0xd5)]?.['data']||'';if([_0x442a0d(0x98)][_0x442a0d(0xa5)](_0x233656?.['body']?.[_0x442a0d(0xd3)])){if(_0x593241[_0x442a0d(0xd6)]()[_0x442a0d(0xa5)](_0x442a0d(0xa6))||_0x593241[_0x442a0d(0xd6)]()['includes'](_0x442a0d(0xbd))){let _0x272270=_0x593241?.[_0x442a0d(0xc4)](/GHS\s+([\d,]+\.?\d*)/g)?.[_0x442a0d(0x99)](_0x4f9c6a=>parseFloat(_0x4f9c6a[_0x442a0d(0x91)]('\x20')[0x1][_0x442a0d(0xe0)](/,/g,'')))[0x0];if(_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0x94)+_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xba)]]['includes'](_0x442a0d(0xc2))||_0x233656?.[_0x442a0d(0xd5)]?.['slot'+_0x233656?.[_0x442a0d(0xd5)]?.['simslot']][_0x442a0d(0xa5)](_0x442a0d(0xb2))){_0x272270=_0x593241?.[_0x442a0d(0xc4)](/GHS\d+\.\d{2}/g);if([undefined,_0x442a0d(0xce),null,_0x442a0d(0x95)][_0x442a0d(0xa5)](_0x272270))_0x272270=_0x593241?.[_0x442a0d(0xc4)](/GHS\d{1,3}(?:,\d{3})*\.\d{2}/g);if(_0x593241[_0x442a0d(0xa5)](_0x442a0d(0xe4))&&_0x593241[_0x442a0d(0xa5)]('Confirmed.GHS')&&_0x593241[_0x442a0d(0xa5)](_0x442a0d(0xc3)))_0x272270=_0x272270?.[0x1]['replace']('GHS','');else _0x272270=_0x272270?.[0x0]['replace'](_0x442a0d(0xd0),'');}await msisdnModel[_0x442a0d(0x90)]({'balance':_0x272270,'slot':_0x233656?.['body']?.[_0x442a0d(0xba)]},{'where':{'mobile':_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xb8)+_0x233656?.[_0x442a0d(0xd5)]?.[_0x442a0d(0xba)]]}});}}}_0x95b990[_0x442a0d(0xc8)](0xc8)[_0x442a0d(0xe7)]('OK');};const getDevices=async(_0x4f7128,_0x2fc097)=>{const _0x3cac6a=a9_0x5c7351;const _0x1f6c65=await devicesModel[_0x3cac6a(0xe6)]();_0x2fc097[_0x3cac6a(0xb1)](_0x1f6c65||[]);};const getTasks=async(_0x2d6249,_0x402d2a)=>{const _0x2c36be=a9_0x5c7351;const _0x4a794a=await tasksModel[_0x2c36be(0xe6)]();_0x402d2a[_0x2c36be(0xb1)](_0x4a794a||[]);};function a9_0x94be(){const _0x200770=['games','mobile','120ieRkjk','simslot','9930RZzNSR','./models/games','balance\x20is','data','SMS','random','dataValues','telecel','Your\x20E-levy\x20charge','match','action','Game\x20approved\x20successfully','18RGdqYj','status','log','1664351ASIrPw','912087mNUVIE','device_register','TIGO','undefined','Game\x20rejected\x20successfully','GHS','length','count','sender','your\x20number\x20is','body','toLowerCase','slice','MTN','balance','findOne','device_id','destroy','214232VMWrbd','13035JZFUeL','./models/tasks','replace','1389','Done','Your\x20mobile\x20number\x20is','paid\x20to','floor','findAll','send','isArray','update','split','mobile1','101ToqHqb','slot','null','create','1523893LQKBQE','T-CASH','map','play','stake','233','exports','./utils/helper','Created\x20successfully','2464fkHUTD','5968GljMjq','Game\x20as\x20not\x20found','VODAFONE','.txt:','includes','current\x20balance','Deleted\x20successfully','query','1495WdgEqY','wait=3000','fill','bulkCreate','params','startsWith','_slot','push','json','vodafone','9FZiHTe','device_name','slot0','mobile0'];a9_0x94be=function(){return _0x200770;};return a9_0x94be();}const getMsisdn=async(_0x2cd16a,_0x5df802)=>{const _0x568036=a9_0x5c7351;const _0x1ac1ab=await msisdnModel[_0x568036(0xe6)]();_0x5df802[_0x568036(0xb1)](_0x1ac1ab||[]);};const getCommands=async(_0x1d6ee3,_0x58d5ad)=>{const _0x4ecfe9=a9_0x5c7351;const _0x3e21eb=await commandListModel['findAll']();_0x58d5ad[_0x4ecfe9(0xb1)](_0x3e21eb||[]);};const createTasks=async(_0x47c03a,_0x4c3d75)=>{const _0x5c759a=a9_0x5c7351;if(Array[_0x5c759a(0xe8)](_0x47c03a[_0x5c759a(0xd5)]))await tasksModel[_0x5c759a(0xac)](_0x47c03a[_0x5c759a(0xd5)]);else await tasksModel[_0x5c759a(0x96)](_0x47c03a[_0x5c759a(0xd5)]);_0x4c3d75['send'](_0x5c759a(0x9f));};function a9_0x1276(_0x2f6586,_0x2f6014){const _0x94be69=a9_0x94be();a9_0x1276=function(_0x12764e,_0x4a375d){_0x12764e=_0x12764e-0x90;let _0x42d5dc=_0x94be69[_0x12764e];return _0x42d5dc;};return a9_0x1276(_0x2f6586,_0x2f6014);}const deleteTasks=async(_0x350362,_0x2e2597)=>{const _0x5c5084=a9_0x5c7351;const _0x1b0865=await tasksModel['findOne']({'where':{'id':_0x350362['params']?.['id']}});if(_0x1b0865?.[_0x5c5084(0xc1)]?.['id'])await tasksModel[_0x5c5084(0xdc)]({'where':{'id':_0x350362[_0x5c5084(0xad)]?.['id']}});_0x2e2597[_0x5c5084(0xe7)]('Deleted\x20successfully');};const deleteMsisdn=async(_0x255d88,_0xb37ed9)=>{const _0x29bee7=a9_0x5c7351;const _0x4289e4=await msisdnModel[_0x29bee7(0xda)]({'where':{'id':_0x255d88[_0x29bee7(0xad)]?.['id']}});if(_0x4289e4?.[_0x29bee7(0xc1)]?.['id'])await msisdnModel['destroy']({'where':{'id':_0x255d88[_0x29bee7(0xad)]?.['id']}});_0xb37ed9['send'](_0x29bee7(0xa7));};const genGames=async(_0xdf1b68,_0x2c495f)=>{const _0x1c58d1=a9_0x5c7351;const _0x8117b4=[0x1,0x3,0x8,0x5];const _0x5e1b9a={'3':0x3,'4':0x6,'5':0xa,'6':0xf,'7':0x15,'8':0x1c,'9':0x24,'10':0x2d};const _0x5756b8=Array(+_0xdf1b68?.['body']?.[_0x1c58d1(0xd2)]||0xa)[_0x1c58d1(0xab)](0x0)[_0x1c58d1(0x99)](_0x3e9518=>{const _0x5398bb=_0x1c58d1;const _0x532539=[];let _0x405a4d={'1':0x1,'3':0x2,'8':0xa,'5':0x1};const _0x14c709=Math[_0x5398bb(0xe5)](Math[_0x5398bb(0xc0)]()*_0xdf1b68?.[_0x5398bb(0xd5)]?.[_0x5398bb(0xb7)]?.[_0x5398bb(0xd1)])+0x0;const _0x4f8ddc=_0xdf1b68?.[_0x5398bb(0xd5)]?.[_0x5398bb(0xb7)][_0x14c709];let _0x2274b3=_0x405a4d[String(_0x4f8ddc)];if(_0x2274b3===0xa)_0x2274b3=Math[_0x5398bb(0xe5)](Math['random']()*(0xa-0x5))+0x5;let _0x1e6ffd=!![];while(_0x1e6ffd){const _0x4c5a9f=Math[_0x5398bb(0xe5)](Math[_0x5398bb(0xc0)]()*(0x4a-0x1+0x1)+0x1);if(!_0x532539[_0x5398bb(0xa5)](_0x4c5a9f))_0x532539[_0x5398bb(0xb0)](_0x4c5a9f);if(_0x532539['length']===_0x2274b3)_0x1e6ffd=![];}const _0x234838=_0xdf1b68[_0x5398bb(0xd5)]?.[_0x5398bb(0x9b)]?.[_0x5398bb(0x91)](',');const _0x295a86=Math[_0x5398bb(0xe5)](Math[_0x5398bb(0xc0)]()*_0x234838?.[_0x5398bb(0xd1)])+0x0;let _0x1a49d8=_0x234838[_0x295a86];let _0x36b421=0xf0*+_0x1a49d8;if(_0x4f8ddc==='8'){_0x1a49d8=+_0x5e1b9a[''+_0x532539?.[_0x5398bb(0xd1)]]*+_0x1a49d8;_0x36b421=0xf0*+_0x5e1b9a[''+_0x532539?.[_0x5398bb(0xd1)]]*+_0x1a49d8;}else if(_0x4f8ddc==='5')_0x1a49d8=0x40;else if(_0x4f8ddc==='1')_0x36b421=0x3c*+_0x1a49d8;return{'plays':_0x532539,'pickGame':_0x4f8ddc,'stake':_0x234838[_0x295a86],'price':_0x1a49d8,'stake':_0x234838[_0x295a86],'win':_0x36b421};});_0x2c495f[_0x1c58d1(0xb1)](_0x5756b8);};const createGame=async(_0xf95e31,_0xc6b5a9)=>{const _0x39b4db=a9_0x5c7351;if(Array['isArray'](_0xf95e31[_0x39b4db(0xd5)]))await gamesModel[_0x39b4db(0xac)](_0xf95e31[_0x39b4db(0xd5)]);else await gamesModel[_0x39b4db(0x96)](_0xf95e31[_0x39b4db(0xd5)]);_0xc6b5a9[_0x39b4db(0xe7)](_0x39b4db(0x9f));};const getGames=async(_0x2e44e,_0x437b02)=>{const _0x2fd273=a9_0x5c7351;const _0x125d98=await gamesModel['findAll']();_0x437b02[_0x2fd273(0xb1)](_0x125d98||[]);};const deleteGame=async(_0x569e0f,_0x15a9bf)=>{const _0x522106=a9_0x5c7351;const _0x2c96d3=await gamesModel[_0x522106(0xda)]({'where':{'id':_0x569e0f[_0x522106(0xad)]?.['id']}});if(_0x2c96d3?.[_0x522106(0xc1)]?.['id'])await gamesModel[_0x522106(0xdc)]({'where':{'id':_0x569e0f[_0x522106(0xad)]?.['id']}});_0x15a9bf[_0x522106(0xe7)](_0x522106(0xa7));};const getSummary=async(_0x2071c2,_0x6cb9c6)=>{const _0x328c4c=a9_0x5c7351;const _0x441873=await msisdnModel['sum'](_0x328c4c(0xd9));_0x6cb9c6['json']({'total':_0x441873});};const managePlay=async(_0x52b1a8,_0x38bf60)=>{const _0x522744=a9_0x5c7351;const _0xaf4d74=await gamesModel[_0x522744(0xda)]({'where':{'id':_0x52b1a8['params']?.['id']}});if(!_0xaf4d74?.['dataValues']?.['id'])return _0x38bf60[_0x522744(0xc8)](0x194)[_0x522744(0xe7)](_0x522744(0xa2));if(+_0x52b1a8['params']?.[_0x522744(0xc8)]===0x1){await tasksModel[_0x522744(0x96)]({'device_id':_0xaf4d74?.['dataValues']?.[_0x522744(0xdb)],'task':_0xaf4d74?.['dataValues']?.[_0x522744(0x9a)]});await gamesModel[_0x522744(0xdc)]({'where':{'id':_0x52b1a8[_0x522744(0xad)]?.['id']}});return _0x38bf60[_0x522744(0xe7)](_0x522744(0xc6));}else{await gamesModel[_0x522744(0xdc)]({'where':{'id':_0x52b1a8[_0x522744(0xad)]?.['id']}});return _0x38bf60[_0x522744(0xe7)](_0x522744(0xcf));}};module[a9_0x5c7351(0x9d)]={'pollingService':pollingService,'deletePollingService':deletePollingService,'deviceLog':deviceLog,'getDevices':getDevices,'createTasks':createTasks,'deleteTasks':deleteTasks,'getTasks':getTasks,'genGames':genGames,'getMsisdn':getMsisdn,'getCommands':getCommands,'deleteMsisdn':deleteMsisdn,'createGame':createGame,'deleteGame':deleteGame,'getGames':getGames,'getSummary':getSummary,'managePlay':managePlay};